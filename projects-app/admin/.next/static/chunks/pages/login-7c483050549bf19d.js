(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(t,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return i(1237)}])},8484:function(t,n,i){"use strict";i.d(n,{h:function(){return s}});var e=i(567);async function a(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=await fetch("http://localhost:3000"+t,(0,e._)({credentials:"include",headers:(0,e._)({"Content-Type":"application/json"},n.headers||{})},n)),a=await i.json().catch(()=>({}));if(!i.ok||(null==a?void 0:a.ok)===!1)throw Error(a.error||a.reason||"status_".concat(i.status));return a}let s={loginWithToken:t=>a("/api/admin/session-login",{method:"POST",body:JSON.stringify({token:t})}),loginWithPassword:(t,n)=>a("/api/admin/session-login",{method:"POST",body:JSON.stringify({email:t,password:n})}),whoami:()=>a("/api/admin/whoami"),logout:()=>a("/api/admin/logout"),metrics:()=>a("/api/admin-metrics")}},1237:function(t,n,i){"use strict";i.r(n),i.d(n,{default:function(){return l}});var e=i(5893),a=i(7294),s=i(1163),o=i(8484);function l(){let[t,n]=(0,a.useState)("admin@example.com"),[i,l]=(0,a.useState)("changeme"),[r,d]=(0,a.useState)(""),[u,c]=(0,a.useState)(""),h=(0,s.useRouter)();async function p(n){n.preventDefault(),c("");try{r?await o.h.loginWithToken(r):await o.h.loginWithPassword(t,i),await o.h.whoami(),h.push("/metrics")}catch(t){c(t.message||String(t))}}return(0,e.jsxs)("form",{onSubmit:p,style:{maxWidth:420},children:[(0,e.jsx)("h2",{children:"Admin Login"}),u?(0,e.jsx)("div",{style:{color:"crimson"},children:u}):null,(0,e.jsxs)("div",{style:{margin:"8px 0"},children:[(0,e.jsx)("label",{children:"Static Token"}),(0,e.jsx)("input",{value:r,onChange:t=>d(t.target.value),placeholder:"optional",style:{width:"100%",padding:8}})]}),(0,e.jsxs)("div",{style:{margin:"8px 0"},children:[(0,e.jsx)("label",{children:"Email"}),(0,e.jsx)("input",{value:t,onChange:t=>n(t.target.value),style:{width:"100%",padding:8}})]}),(0,e.jsxs)("div",{style:{margin:"8px 0"},children:[(0,e.jsx)("label",{children:"Password"}),(0,e.jsx)("input",{type:"password",value:i,onChange:t=>l(t.target.value),style:{width:"100%",padding:8}})]}),(0,e.jsx)("button",{type:"submit",style:{padding:"8px 12px"},children:"Login"})]})}},1163:function(t,n,i){t.exports=i(9090)}},function(t){t.O(0,[888,774,179],function(){return t(t.s=3236)}),_N_E=t.O()}]);